<div class="form-container">
  <div class="form-header">
    <h1>{{ isEditMode ? 'Editar Servicio' : 'Nuevo Servicio' }}</h1>
    <button class="btn-back" (click)="cancel()">‚Üê Volver</button>
  </div>

  <div class="error-message" *ngIf="errorMessage">
    <p>{{ errorMessage }}</p>
  </div>

  <form [formGroup]="servicioForm" (ngSubmit)="onSubmit()" class="servicio-form">
    <!-- Secci√≥n de Informaci√≥n B√°sica -->
    <div class="form-section">
      <h2>üìã Informaci√≥n B√°sica</h2>
      
      <div class="form-group">
        <label for="nombreServicio">Nombre del Servicio *</label>
        <input
          type="text"
          id="nombreServicio"
          formControlName="nombreServicio"
          placeholder="Ej: Vuelo Santa Cruz - La Paz"
          [class.invalid]="isFieldInvalid('nombreServicio')"
        />
        <span class="error-text" *ngIf="isFieldInvalid('nombreServicio')">
          El nombre del servicio es requerido
        </span>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="tipoServicio">Tipo de Servicio *</label>
          <select 
            id="tipoServicio" 
            formControlName="tipoServicio"
            [class.invalid]="isFieldInvalid('tipoServicio')"
          >
            <option value="">Seleccionar tipo...</option>
            <option *ngFor="let tipo of tiposServicio" [value]="tipo">{{ tipo }}</option>
          </select>
          <span class="error-text" *ngIf="isFieldInvalid('tipoServicio')">
            El tipo de servicio es requerido
          </span>
        </div>

        <div class="form-group">
          <label for="proveedorId">Proveedor</label>
          <select id="proveedorId" formControlName="proveedorId">
            <option value="">Sin proveedor asignado</option>
            <option *ngFor="let proveedor of proveedores" [value]="proveedor.id">
              {{ proveedor.nombreEmpresa }}
            </option>
          </select>
        </div>
      </div>

      <div class="form-group">
        <label for="descripcion">Descripci√≥n</label>
        <textarea
          id="descripcion"
          formControlName="descripcion"
          placeholder="Descripci√≥n detallada del servicio..."
          rows="4"
        ></textarea>
      </div>
    </div>

    <!-- Secci√≥n de Destino -->
    <div class="form-section">
      <h2>üìç Informaci√≥n de Destino</h2>
      
      <div class="form-row">
        <div class="form-group">
          <label for="destinoCiudad">Ciudad de Destino</label>
          <input
            type="text"
            id="destinoCiudad"
            formControlName="destinoCiudad"
            placeholder="Ej: La Paz"
          />
        </div>

        <div class="form-group">
          <label for="destinoPais">Pa√≠s de Destino</label>
          <input
            type="text"
            id="destinoPais"
            formControlName="destinoPais"
            placeholder="Ej: Bolivia"
          />
        </div>
      </div>
    </div>

    <!-- Secci√≥n de Precios y Disponibilidad -->
    <div class="form-section">
      <h2>üí∞ Precios y Disponibilidad</h2>
      
      <div class="form-row">
        <div class="form-group">
          <label for="precioCosto">Precio de Costo (Bs)</label>
          <input
            type="number"
            id="precioCosto"
            formControlName="precioCosto"
            placeholder="0.00"
            step="0.01"
            min="0"
            [class.invalid]="isFieldInvalid('precioCosto')"
          />
          <span class="error-text" *ngIf="isFieldInvalid('precioCosto')">
            El precio de costo debe ser positivo
          </span>
        </div>

        <div class="form-group">
          <label for="precioVenta">Precio de Venta (Bs)</label>
          <input
            type="number"
            id="precioVenta"
            formControlName="precioVenta"
            placeholder="0.00"
            step="0.01"
            min="0"
            [class.invalid]="isFieldInvalid('precioVenta')"
          />
          <span class="error-text" *ngIf="isFieldInvalid('precioVenta')">
            El precio de venta debe ser positivo
          </span>
        </div>

        <div class="form-group">
          <label for="isAvailable">Estado del Servicio</label>
          <select id="isAvailable" formControlName="isAvailable">
            <option [ngValue]="true">‚úÖ Disponible</option>
            <option [ngValue]="false">‚ùå No Disponible</option>
          </select>
        </div>
      </div>
    </div>

    <div class="form-actions">
      <button type="button" class="btn-cancel" (click)="cancel()" [disabled]="loading">
        Cancelar
      </button>
      <button type="submit" class="btn-submit" [disabled]="loading || servicioForm.invalid">
        <span *ngIf="!loading">{{ isEditMode ? 'üíæ Actualizar' : '‚ûï Crear' }} Servicio</span>
        <span *ngIf="loading">Procesando...</span>
      </button>
    </div>
  </form>
</div>
