<div class="container">
  <div class="header">
    <h1>GestiÃ³n de Paquetes TurÃ­sticos</h1>
    <button class="btn-primary" routerLink="/dashboard/paquetes-turisticos/nuevo">
      <span class="icon">â•</span>
      Nuevo Paquete
    </button>
  </div>

  <!-- Barra de bÃºsqueda -->
  <div class="search-bar">
    <input
      type="text"
      [(ngModel)]="searchTerm"
      (keyup.enter)="searchPaquetes()"
      placeholder="Buscar por nombre o descripciÃ³n..."
      class="search-input"
    />
    <button class="btn-search" (click)="searchPaquetes()">ğŸ” Buscar</button>
    <button class="btn-clear" (click)="clearSearch()" *ngIf="searchTerm">âœ– Limpiar</button>
  </div>

  <!-- Loading -->
  <div *ngIf="loading" class="loading">
    <p>â³ Cargando paquetes turÃ­sticos...</p>
  </div>

  <!-- Error -->
  <div *ngIf="error" class="error">
    <p>âŒ {{ error }}</p>
  </div>

  <!-- Lista de paquetes -->
  <div *ngIf="!loading && !error" class="paquetes-grid">
    <div *ngFor="let paquete of paginatedPaquetes" class="paquete-card">
      <div class="card-header">
        <h3>{{ paquete.nombrePaquete }}</h3>
        <span class="badge-destino">ğŸ“ {{ paquete.destinoPrincipal }}</span>
      </div>

      <div class="card-body">
        <p class="descripcion">{{ paquete.descripcion || 'Sin descripciÃ³n' }}</p>
        
        <div class="info-grid">
          <div class="info-item">
            <span class="label">â° DuraciÃ³n:</span>
            <span class="value">{{ paquete.duracionDias || 0 }} dÃ­as</span>
          </div>
          
          <div class="info-item">
            <span class="label">ğŸ’° Precio Total:</span>
            <span class="value price">
              {{ paquete.precioTotalVenta ? '$' + paquete.precioTotalVenta.toFixed(2) : 'No definido' }}
            </span>
          </div>

          <div class="info-item">
            <span class="label">ğŸ“Š Precio/DÃ­a:</span>
            <span class="value">
              {{ getPrecioPorDia(paquete) > 0 ? '$' + getPrecioPorDia(paquete).toFixed(2) : '-' }}
            </span>
          </div>

          <div class="info-item">
            <span class="label">ğŸ¯ Servicios:</span>
            <span class="value badge-servicios">{{ getNumServicios(paquete) }}</span>
          </div>
        </div>

        <!-- Lista de servicios incluidos -->
        <div *ngIf="getNumServicios(paquete) > 0" class="servicios-list">
          <p class="servicios-title">Servicios incluidos:</p>
          <ul>
            <li *ngFor="let servicio of paquete.servicios">
              {{ servicio.nombreServicio }} ({{ servicio.tipoServicio }})
            </li>
          </ul>
        </div>
      </div>

      <div class="card-actions">
        <button class="btn-view" (click)="viewPaquete(paquete.id)">
          ğŸ‘ï¸ Ver
        </button>
        <button class="btn-edit" (click)="editPaquete(paquete.id)">
          âœï¸ Editar
        </button>
        <button class="btn-delete" (click)="deletePaquete(paquete.id, paquete.nombrePaquete)">
          ğŸ—‘ï¸ Eliminar
        </button>
      </div>
    </div>
  </div>

  <!-- Sin resultados -->
  <div *ngIf="!loading && !error && filteredPaquetes.length === 0" class="empty-state">
    <p>ğŸ“­ No se encontraron paquetes turÃ­sticos</p>
  </div>

  <!-- PaginaciÃ³n -->
  <div class="pagination-container" *ngIf="!loading && !error && filteredPaquetes.length > 0">
    <div class="pagination-info">
      Mostrando {{ (currentPage - 1) * itemsPerPage + 1 }} 
      a {{ Math.min(currentPage * itemsPerPage, filteredPaquetes.length) }} 
      de {{ filteredPaquetes.length }} paquetes turÃ­sticos
    </div>
    
    <div class="pagination-controls">
      <button 
        class="pagination-btn" 
        (click)="previousPage()" 
        [disabled]="currentPage === 1"
        title="PÃ¡gina anterior"
      >
        â¬…ï¸ Anterior
      </button>
      
      <button 
        *ngFor="let page of getPageNumbers()" 
        class="pagination-btn page-number"
        [class.active]="page === currentPage"
        (click)="goToPage(page)"
      >
        {{ page }}
      </button>
      
      <button 
        class="pagination-btn" 
        (click)="nextPage()" 
        [disabled]="currentPage === totalPages"
        title="PÃ¡gina siguiente"
      >
        Siguiente â¡ï¸
      </button>
    </div>
  </div>
</div>

<!-- Modal de confirmaciÃ³n -->
<app-confirm-dialog
  [show]="showConfirmDialog"
  [data]="confirmDialogData"
  (confirm)="onConfirmDelete()"
  (cancel)="onCancelDelete()"
></app-confirm-dialog>
