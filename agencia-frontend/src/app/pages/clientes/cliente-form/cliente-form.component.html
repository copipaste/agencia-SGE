<div class="form-container">
  <div class="form-header">
    <h1>{{ isEditMode ? 'Editar Cliente' : 'Nuevo Cliente' }}</h1>
    <button class="btn-back" (click)="cancel()">‚Üê Volver</button>
  </div>

  <div class="error-message" *ngIf="errorMessage">
    <p>{{ errorMessage }}</p>
  </div>

  <form [formGroup]="clienteForm" (ngSubmit)="onSubmit()" class="cliente-form">
    <!-- Secci√≥n de Informaci√≥n de Usuario (solo visible en modo creaci√≥n) -->
    <div class="form-section" *ngIf="!isEditMode">
      <h2>üë§ Informaci√≥n de Usuario</h2>
      
      <div class="form-group">
        <label for="email">Email *</label>
        <input
          type="email"
          id="email"
          formControlName="email"
          placeholder="ejemplo@correo.com"
          [class.invalid]="isFieldInvalid('email')"
        />
        <span class="error-text" *ngIf="isFieldInvalid('email') && clienteForm.get('email')?.hasError('required')">
          El email es requerido
        </span>
        <span class="error-text" *ngIf="isFieldInvalid('email') && clienteForm.get('email')?.hasError('email')">
          El email no es v√°lido
        </span>
      </div>

      <div class="form-group">
        <label for="password">Contrase√±a *</label>
        <input
          type="password"
          id="password"
          formControlName="password"
          placeholder="M√≠nimo 6 caracteres"
          [class.invalid]="isFieldInvalid('password')"
        />
        <span class="error-text" *ngIf="isFieldInvalid('password') && clienteForm.get('password')?.hasError('required')">
          La contrase√±a es requerida
        </span>
        <span class="error-text" *ngIf="isFieldInvalid('password') && clienteForm.get('password')?.hasError('minlength')">
          La contrase√±a debe tener al menos 6 caracteres
        </span>
      </div>

      <div class="form-group">
        <label for="nombre">Nombre *</label>
        <input
          type="text"
          id="nombre"
          formControlName="nombre"
          placeholder="Ej: Juan"
          [class.invalid]="isFieldInvalid('nombre')"
        />
        <span class="error-text" *ngIf="isFieldInvalid('nombre')">
          El nombre es requerido
        </span>
      </div>

      <div class="form-group">
        <label for="apellido">Apellido *</label>
        <input
          type="text"
          id="apellido"
          formControlName="apellido"
          placeholder="Ej: P√©rez"
          [class.invalid]="isFieldInvalid('apellido')"
        />
        <span class="error-text" *ngIf="isFieldInvalid('apellido')">
          El apellido es requerido
        </span>
      </div>

      <div class="form-group">
        <label for="telefono">Tel√©fono</label>
        <input
          type="tel"
          id="telefono"
          formControlName="telefono"
          placeholder="Ej: +591 70123456"
        />
      </div>

      <div class="form-group">
        <label for="sexo">Sexo</label>
        <select id="sexo" formControlName="sexo">
          <option value="">Seleccionar...</option>
          <option value="Masculino">Masculino</option>
          <option value="Femenino">Femenino</option>
          <option value="Otro">Otro</option>
        </select>
      </div>
    </div>

    <!-- Secci√≥n de Informaci√≥n del Cliente -->
    <div class="form-section">
      <h2>üìç Informaci√≥n del Cliente</h2>
      
      <div class="form-group">
        <label for="direccion">Direcci√≥n *</label>
        <input
          type="text"
          id="direccion"
          formControlName="direccion"
          placeholder="Ej: Calle Falsa 123, La Paz, Bolivia"
          [class.invalid]="isFieldInvalid('direccion')"
        />
        <span class="error-text" *ngIf="isFieldInvalid('direccion')">
          La direcci√≥n es requerida
        </span>
      </div>

      <div class="form-group">
        <label for="fechaNacimiento">Fecha de Nacimiento</label>
        <input
          type="date"
          id="fechaNacimiento"
          formControlName="fechaNacimiento"
        />
      </div>

      <div class="form-group">
        <label for="numeroPasaporte">N√∫mero de Pasaporte *</label>
        <input
          type="text"
          id="numeroPasaporte"
          formControlName="numeroPasaporte"
          placeholder="Ej: AB123456"
          [class.invalid]="isFieldInvalid('numeroPasaporte')"
        />
        <span class="error-text" *ngIf="isFieldInvalid('numeroPasaporte')">
          El n√∫mero de pasaporte es requerido
        </span>
      </div>
    </div>

    <div class="form-actions">
      <button type="button" class="btn-cancel" (click)="cancel()" [disabled]="loading">
        Cancelar
      </button>
      <button type="submit" class="btn-submit" [disabled]="loading || clienteForm.invalid">
        <span *ngIf="!loading">{{ isEditMode ? 'üíæ Actualizar' : '‚ûï Crear' }} Cliente</span>
        <span *ngIf="loading">Procesando...</span>
      </button>
    </div>
  </form>
</div>
